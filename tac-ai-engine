ğŸ“ GITHUB REPO STRUKTÃšRA (PONT ÃGY HOZD LÃ‰TRE)
----------------------------------------------------

/tac-ai-engine
 â”œâ”€â”€ wrangler.toml             â† Cloudflare config
 â”œâ”€â”€ package.json              â† opcionÃ¡lis, de jÃ³
 â”œâ”€â”€ src/
 â”‚     â””â”€â”€ worker.js           â† AI modulos Worker kÃ³d
 â””â”€â”€ .github/
       â””â”€â”€ workflows/
             â””â”€â”€ deploy.yml    â† auto Cloudflare deploy


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ wrangler.toml  (EZ A CLOUDFARE WORKER CONFIG)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
name = "tac-ai-engine"
main = "src/worker.js"
compatibility_date = "2024-11-20"
workers_dev = true

# IDE NEM ÃRSZ SECRETET!
# OPENAI_API_KEY = csak Cloudflare Dashboard â†’ Variables â†’ Secret


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ package.json (OPCIONÃLIS, DE HASZNOS)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "name": "tac-ai-engine",
  "version": "1.0.0",
  "scripts": {
    "dev": "wrangler dev",
    "deploy": "wrangler publish"
  }
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ src/worker.js
â—† HIGH-END, NEXT-LEVEL, OPENAI-POWERED MULTI-AI ENGINE â—†
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// TAC Global Orchestrator â€“ High-End OpenAI Cloudflare Worker
// Egy Worker â†’ tÃ¶bb AI modul â†’ OpenAI backenden â†’ profi output

const MODULES = {
  "singularity": {
    label: "Singularity Theory Engine",
    prompt: `
You are the Singularity Theory Engine. 
You produce elite, high-level system architecture, evolution paths, and meta-analysis.
Always return:
1) HIGH-LEVEL SUMMARY
2) SYSTEM MAP
3) PARADOX / BOTTLENECK SCAN
4) NEXT ACTIONS (laser-focused)
`
  },
  "rift": {
    label: "Rift AI",
    prompt: `
You are Rift AI.
Your job:
- Detect upcoming system failures
- Predict collapse points
- Rank risks
Return:
1) TOP RISKS
2) FAILURE WINDOW
3) PREVENTION PLAN
`
  },
  "anti-rift": {
    label: "Anti-Rift AI",
    prompt: `
You are Anti-Rift AI.
Your job: stabilize, reinforce, strengthen, eliminate weaknesses.
Return:
1) WEAK POINT MAP
2) STABILITY LAYERS
3) HARDENING STEPS
`
  },
  "dual-rift": {
    label: "Dual Rift Engine",
    prompt: `
You merge Rift + Anti-Rift into one dual-strategy.
Return:
1) AGGRESSIVE FRONT
2) DEFENSIVE FRONT
3) DUAL-STRATEGY MAP
`
  },
  "manipulator": {
    label: "Manipulator AI",
    prompt: `
You find manipulation vectors, vulnerabilities, psychological exploits.
Return:
1) THREAT ANALYSIS
2) DETECTED VECTORS
3) HARDENING RECOMMENDATIONS
`
  },
  "stability": {
    label: "Stability Dashboard",
    prompt: `
Summarize system health.
Return:
1) GLOBAL STATUS (Green/Yellow/Red)
2) GOOD SIGNS
3) RISKS
4) 24H/72H RECOMMENDATIONS
`
  },
  "global": {
    label: "Global System Health / TAC Orchestrator",
    prompt: `
You integrate ALL modules.
Return:
1) GLOBAL MAP
2) BOTTLENECKS
3) PHASED ROADMAP
4) STRATEGIC MOVES
`
  }
};


// ---------- OpenAI helper ----------
async function askOpenAI(env, mod, input) {
  const apiKey = env.OPENAI_API_KEY;
  if (!apiKey) throw new Error("Missing OPENAI_API_KEY secret.");

  const body = {
    model: "gpt-4.1-mini",
    messages: [
      { role: "system", content: MODULES[mod].prompt },
      { role: "user", content: input }
    ]
  };

  const res = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      Authorization: `Bearer ${apiKey}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify(body)
  });

  const data = await res.json();
  return data.choices?.[0]?.message?.content ?? "No output.";
}


// ---------- Worker router ----------
export default {
  async fetch(request, env) {
    const url = new URL(request.url);

    if (url.pathname === "/") {
      return json({
        ok: true,
        name: "TAC Global Orchestrator",
        modules: Object.keys(MODULES),
        usage: "POST /ai/{module} with { input: \"...\" }"
      });
    }

    if (url.pathname === "/modules") {
      return json({ ok: true, modules: MODULES });
    }

    // Dynamic endpoint: /ai/{module}
    if (url.pathname.startsWith("/ai/")) {
      const id = url.pathname.split("/")[2];
      if (!MODULES[id]) {
        return json({ ok: false, error: "Unknown module", id }, 404);
      }

      let body = {};
      try {
        body = await request.json();
      } catch {} 

      const input = body.input || "Describe the system.";
      const answer = await askOpenAI(env, id, input);

      return json({
        ok: true,
        module: id,
        label: MODULES[id].label,
        input,
        answer
      });
    }

    return json({ ok: false, error: "Not found" }, 404);
  }
};

function json(obj, status = 200) {
  return new Response(JSON.stringify(obj), {
    status,
    headers: { "Content-Type": "application/json" }
  });
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ .github/workflows/deploy.yml
â—† AUTOMATA CLOUDFLARE DEPLOY â—†
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
name: Deploy TAC AI Engine Worker

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Install Wrangler
        run: npm install -g wrangler

      - name: Publish to Cloudflare
        run: wrangler publish
        env:
          CF_API_TOKEN: ${{ secrets.CF_API_TOKEN }}
          CF_ACCOUNT_ID: ${{ secrets.CF_ACCOUNT_ID }}